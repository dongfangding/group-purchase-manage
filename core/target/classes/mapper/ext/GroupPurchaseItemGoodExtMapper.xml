<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ddf.group.purchase.core.mapper.GroupPurchaseItemGoodMapper">
    <select id="selectByGroupPurchaseItemId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from group_purchase_item_good
        where group_purchase_item_id = #{groupPurchaseItemId}
    </select>

    <insert id="batchInsert">
        insert into group_purchase_item_good (group_purchase_id, group_purchase_item_id, group_purchase_good_id,
                                              group_purchase_good_name, group_purchase_good_pic, join_uid, good_num,
                                              ctime, mtime, price,
                                              good_description, total_price) values
        <foreach collection="list" item="item" separator=",">
            (#{item.groupPurchaseId}, #{item.groupPurchaseItemId}, #{item.groupPurchaseGoodId},
             #{item.groupPurchaseGoodName},
             #{item.groupPurchaseGoodPic}, #{item.joinUid}, #{item.goodNum}, #{item.ctime}, #{item.mtime},
             #{item.price},
             #{item.goodDescription}, #{item.totalPrice})
        </foreach>
    </insert>

    <select id="selectUserGroupGood" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from group_purchase_item_good
        where group_purchase_id = #{groupId}
          and join_uid = #{userId}
          and group_purchase_good_id = #{goodId}
        limit 1
    </select>

    <select id="listUserGroupGood" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from group_purchase_item_good
        where group_purchase_id = #{groupId}
          and join_uid = #{userId}
    </select>
</mapper>
